" basice settings  " {{{
colorscheme solarized

set titlestring="Mozilla Firefox"
set! ui.caretWidth=7
set! ui.key.generalAccessKey=0

set hlsearch

set visualbell
highlight Bell display: none;

set autocomplete
set complete=sl

set hintchars=fjklasdhguionmerwc
highlight Hint font-family: "Osaka－等幅", "Osaka-Mono"; padding: 1px 3px; border: 1px solid #fdf6e3; background-color: #d33682; color: #fdf6e3; font-size: 12.5px; font-weight: normal; text-transform: uppercase; white-space: nowrap;

set nextpattern=\bnext\b,\bmore\b,^next$,^次(の)?ページ,\b次.*,^次へ$,→\b,^>$,^(>>|≫)$,^(>|≫),(>|≫)$
set previouspattern=\bprev|previous\b,^prev$,^前(の)?ページ,\b前.*,^前へ$,\b←,^<$,^(<<|≪)$,^(<|≪),(<|≪)$

" set editor in each environment
set editor=vim
" <C-q> to open It's All Text!
inoremap <C-q> <Ins><C-q><Ins>
" }}}

" keymappings " {{{
let mapleader = ","

nnoremap <Leader>r :source ~/.vimperatorrc<Cr>

nnoremap s :set<Space>cpt=s<Cr>:open<Space>google<Space>
nnoremap S :set<Space>cpt=s<Cr>:tabopen<Space>google<Space>
nnoremap a :set<Space>cpt=s<Cr>:open<Space>amazon<Space>
nnoremap A :set<Space>cpt=s<Cr>:tabopen<Space>amazon<Space>
nnoremap t :set<Space>cpt=slt<Cr>:tabopen<Space>
nnoremap o :set<Space>cpt=slt<Cr>:open<Space>

noremap + <C-a>
javascript <<JS
mappings.addUserMap(
  [modes.NORMAL],
  ["-"],
  "- to <C-x>",
  function() { events.feedkeys("<C-x>", true); },
  { rhs: "<C-x>", noremap: true }
);
JS

" move a tab
" not move from a tab to an other tab
nnoremap <C-S-j> :tabmove +1<Cr>
nnoremap <C-S-k> :tabmove -1<Cr>

inoremap <C-a> <Ins><C-a><Ins>
inoremap <C-w> <Ins><C-w><Ins>
cnoremap <C-a> <Ins><C-a><Ins>

" show sources
nnoremap <C-S-u> i<C-u>

" focus to the location bar
noremap <C-l> <A-d>

" prevent unconcious operations
inoremap <C-n> <Esc><C-n>
inoremap <C-p> <Esc><C-p>
noremap <BS> <NOP>

" use OS's settings or key-config applications, e.g., KeyRemap4MacBook
" inoremap <C-h> <Left>
" inoremap <C-j> <Down>
" inoremap <C-k> <Up>
" inoremap <C-l> <Right>
inoremap <C-f> <PageDown>
inoremap <C-b> <PageUp>

nnoremap <Leader>/ :nohlsearch<Cr>

nnoremap <Leader>p :emenu ファイル.印刷プレビュー<Cr>

nnoremap <Leader>o :emenu ファイル.Open Multiple Locations...<Cr>
" }}}

" plugin settings " {{{

" _smooziee.js " {{{
" default = [400, 20]
let g:smooziee_scroll_amount=350
let g:smooziee_scroll_interval=25
" }}}

" amazon_simple_uri.js " {{{
let g:amazon_asamashi = "kgtk-22"
" }}}

" caret-hint " {{{
nnoremap <Leader>f :caret move head<Cr>
nnoremap <Leader>F :caret move tail<Cr>
" }}}

" copy.js " {{{
javascript <<JS
liberator.globalVariables.copy_templates = [
  { label: 'urlWithoutEncode', value: 'copy the URL without encoding',
    custom: function(){ return buffer.URL },                         map: 'yy' },
  { label: 'titleAndURL',      value: '%TITLE%\n%URL%',              map: '<S-y>' },
  { label: 'title',            value: '%TITLE%',                     map: ',y' },
  { label: 'anchor',           value: '<a href="%URL%">%TITLE%</a>', map: ',ya' },
  { label: 'selanchor',        value: '<a href="%URL%" title="%TITLE%">%SEL%</a>' },
  { label: 'htmlblockquote',   value: '<blockquote cite="%URL%" title="%TITLE%">%HTMLSEL%</blockquote>' },
  { label: 'ASIN',             value: 'copy ASIN code from Amazon',
    custom: function(){ return content.document.getElementById('ASIN').value; }},

  { label: 'blockquoteForMe', value: '<blockquote>\n  %HTMLSEL%\n</blockquote>\n<p class="p-cite"><cite>From: <a href="%URL%">%TITLE%</a></cite></p>' },
  { label: 'kinikijiAnchor',  value: '<p class="p-news">&raquo;&nbsp;<a href="%URL%">%TITLE%</a></p>' },
  { label: 'amazonForMe',     value: 'Copied: Amazon Affiliate Link',
    custom: function(){ return '<a href="http://www.amazon.co.jp/o/ASIN/' + content.document.getElementById('ASIN').value + '/kgtk-22/" class="amazon">' + content.document.title + '</a>'; }
  },
  { label: 'amazonMarkdown',  value: 'Copied: Amazon Affiliate Link for Markdown',
    custom: function(){ return '[' + content.document.title + '](http://www.amazon.co.jp/o/ASIN/' + content.document.getElementById('ASIN').value + '/kgtk-22/)'; }
  },
  { label: 'tracLink',     value: '[%URL% %TITLE%]',  map: ',yt' },
  { label: 'markdownLink', value: '[%TITLE%](%URL%)', map: ',ym' },
];
JS
" }}}

" feedSomeKeys_3.js " {{{
command! -nargs=+ lazy autocmd VimperatorEnter .* <args>
lazy fmaps -u='mail\.google\.com/mail' c / y f j k n p o u e x r a t # [ ] z * ? gl gi gs gt gd ga gc
lazy fmaps -u='(calendar\.google\.com|www\.google\.com/calendar)' -events=vkeydown t a d w m x c e / + q ? j k r
lazy fmaps -u='(calendar\.google\.com|www\.google\.com/calendar)' -events=keydown <Del> <Bs>
lazy fmaps -u='feedly\.com' ? gh ga gg <S-j> <S-k> r j k n p o v m s <S-v>
lazy fmaps -u='www\.flickr\.com' -events=vkeydown ? l j k
lazy fmaps -u='www\.flickr\.com' -events=keydown <Left> <Right>
lazy fmaps -u='www\.gqueues\.com/main' -events=vkeydown ? j k h l <S-j> <S-k> q r / e n <S-c> s d <C-S-d> o <S-o> gi
lazy fmaps -u='www\.gqueues\.com/main' -events=keydown <Left> <Right>
lazy fmaps -u='chrome://newsfox/content/newsfox\.xul' r m v
" }}}

" qiita-slide.js " {{{
javascript <<JS
liberator.globalVariables.qiita_slide_keys_next = ["l", "<Right>"];
liberator.globalVariables.qiita_slide_keys_prev = ["h", "<Left>"];
liberator.globalVariables.qiita_slide_keys_toggle_fullscreen = ["<C-S-f>"];
JS
" }}}

" slideshare.js " {{{
nnoremap -urls=www\\.slideshare\\.net l       :slideshare next<Cr>
nnoremap -urls=www\\.slideshare\\.net h       :slideshare prev<Cr>
nnoremap -urls=www\\.slideshare\\.net <Right> :slideshare next<Cr>
nnoremap -urls=www\\.slideshare\\.net <Left>  :slideshare prev<Cr>
" }}}

" speakerdeck.js " {{{
nnoremap -urls=speakerdeck\\.com l       :speakerdeck next<Cr>
nnoremap -urls=speakerdeck\\.com h       :speakerdeck prev<Cr>
nnoremap -urls=speakerdeck\\.com <Right> :speakerdeck next<Cr>
nnoremap -urls=speakerdeck\\.com <Left>  :speakerdeck prev<Cr>
" }}}

" twittperator " {{{
let g:twittperator_use_ssl_connection_for_api_ep = 1
" }}}

" websearch.js " {{{
javascript <<JS
liberator.globalVariables.webSearchTemplates = [
  {
    names:             ['weblio'],
    description:       'Translate keywords by weblio',
    url:               'http://ejje.weblio.jp/content/%KEYWORD%',
    urlWithoutKeyword: 'http://ejje.weblio.jp',
  },
  {
    names:             ['thesaurus'],
    description:       'Search keywords by thesaurus.com',
    url:               'http://www.thesaurus.com/browse/%KEYWORD%',
    urlWithoutKeyword: 'http://www.thesaurus.com',
  },
  {
    names:             ['ruby'],
    description:       'Search Ruby documents on APIdock',
    url:               'http://apidock.com/ruby/search?query=%KEYWORD%',
    urlWithoutKeyword: 'http://apidock.com/ruby',
  },
  {
    names:             ['rails'],
    description:       'Search Rails documents on APIdock',
    url:               'http://apidock.com/rails/search?query=%KEYWORD%',
    urlWithoutKeyword: 'http://apidock.com/rails',
  },
  {
    names:             ['github'],
    description:       'Search keywords on Github',
    url:               'https://github.com/search?q=%KEYWORD%',
    urlWithoutKeyword: 'https://github.com/kg8m',
  },
];
JS
" }}}
" }}}

source ~/.vimperatorrc.local

" settingsg after loadplugins  " {{{
loadplugins
" }}}

echo ".vimperatorrc sourced"
